# æˆæœ¬åˆ†æç³»çµ± - æ­£å¼éƒ¨ç½²æŒ‡å—

## ğŸ“Œ ç³»çµ±éœ€æ±‚
- **ä½œæ¥­ç³»çµ±**: macOS / Windows / Linux
- **Python ç‰ˆæœ¬**: 3.8 æˆ–æ›´æ–°
- **ç¶²è·¯**: éœ€è¦ç¶²éš›ç¶²è·¯é€£ç·šï¼ˆç”¨æ–¼è‡ªå‹•ç¿»è­¯åŠŸèƒ½ï¼‰

---

## ğŸš€ éƒ¨ç½²æ–¹æ¡ˆ Aï¼šåœ¨å…¬å¸ä¼ºæœå™¨ä¸Šé‹è¡Œï¼ˆæ¨è–¦ï¼‰

### 1ï¸âƒ£ ç’°å¢ƒæº–å‚™

```bash
# è¤‡è£½æ•´å€‹æˆæœ¬åˆ†æè³‡æ–™å¤¾åˆ°ä¼ºæœå™¨
# å‡è¨­è¤‡è£½åˆ°: /opt/cost-analysis/

cd /opt/cost-analysis

# å»ºç«‹è™›æ“¬ç’°å¢ƒ
python3 -m venv venv

# å•Ÿå‹•è™›æ“¬ç’°å¢ƒ
source venv/bin/activate  # macOS/Linux
# æˆ– venv\Scripts\activate  # Windows

# å®‰è£ä¾è³´
pip install -r requirements.txt
```

### 2ï¸âƒ£ å•Ÿå‹•ä¼ºæœå™¨

```bash
# å•Ÿå‹• Streamlit æ‡‰ç”¨
streamlit run app.py --server.address 0.0.0.0 --server.port 8501
```

âœ… æ‡‰ç”¨å°‡åœ¨ä»¥ä¸‹ä½å€å¯ç”¨:
- **æœ¬åœ°å­˜å–**: http://localhost:8501
- **ç¶²è·¯å­˜å–**: http://ä¼ºæœå™¨IP:8501

### 3ï¸âƒ£ ä¿æŒæ‡‰ç”¨æŒçºŒé‹è¡Œ

**æ–¹æ¡ˆ A1ï¼šä½¿ç”¨ `nohup`ï¼ˆç°¡å–®ï¼‰**
```bash
nohup streamlit run app.py --server.address 0.0.0.0 --server.port 8501 > app.log 2>&1 &
```

**æ–¹æ¡ˆ A2ï¼šä½¿ç”¨ `screen`ï¼ˆæ¨è–¦ï¼‰**
```bash
screen -S cost-analysis
streamlit run app.py --server.address 0.0.0.0 --server.port 8501
# æŒ‰ Ctrl+A å†æŒ‰ D å¯é›¢é–‹ä½†ä¿æŒåŸ·è¡Œ
```

**æ–¹æ¡ˆ A3ï¼šä½¿ç”¨ `tmux`ï¼ˆæœ€ç©©å®šï¼‰**
```bash
tmux new-session -d -s cost-analysis
tmux send-keys -t cost-analysis "cd /opt/cost-analysis && streamlit run app.py --server.address 0.0.0.0 --server.port 8501" Enter
```

**æ–¹æ¡ˆ A4ï¼šç³»çµ±æœå‹™ï¼ˆmacOS - æœ€å°ˆæ¥­ï¼‰**

å»ºç«‹ `~/Library/LaunchAgents/com.company.costanalysis.plist`:
```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.company.costanalysis</string>
    <key>ProgramArguments</key>
    <array>
        <string>/opt/cost-analysis/venv/bin/streamlit</string>
        <string>run</string>
        <string>/opt/cost-analysis/app.py</string>
        <string>--server.address</string>
        <string>0.0.0.0</string>
        <string>--server.port</string>
        <string>8501</string>
    </array>
    <key>RunAtLoad</key>
    <true/>
    <key>StandardOutPath</key>
    <string>/opt/cost-analysis/logs/app.log</string>
    <key>StandardErrorPath</key>
    <string>/opt/cost-analysis/logs/error.log</string>
</dict>
</plist>
```

å•Ÿå‹•æœå‹™:
```bash
launchctl load ~/Library/LaunchAgents/com.company.costanalysis.plist
```

---

## ğŸš€ éƒ¨ç½²æ–¹æ¡ˆ Bï¼šåœ¨å…¶ä»–å“¡å·¥é›»è…¦ä¸Šæœ¬åœ°é‹è¡Œ

### 1ï¸âƒ£ æº–å‚™æ‡‰ç”¨åŒ…

å°‡ä»¥ä¸‹æª”æ¡ˆè¤‡è£½çµ¦å“¡å·¥:
```
æˆæœ¬åˆ†æ/
â”œâ”€â”€ app.py
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ 3-001044-002TS-1-å» å…§è£½ç¨‹.html (æ¨¡æ¿ç¤ºä¾‹)
â”œâ”€â”€ å…¶ä»– .html æˆ– .xlsx æª”æ¡ˆ
â””â”€â”€ launch.sh (åŸ·è¡Œè…³æœ¬)
```

### 2ï¸âƒ£ å“¡å·¥åªéœ€åŸ·è¡Œ

**macOS/Linux:**
```bash
./setup_and_run.sh
```

**Windows:**
```bash
setup_and_run.bat
```

---

## ğŸ“Š æ¨è–¦æ–¹æ¡ˆ

| æ–¹æ¡ˆ | å„ªé» | ç¼ºé» | é©ç”¨æƒ…æ³ |
|------|------|------|---------|
| **ä¼ºæœå™¨ + nohup** | ç°¡å–®ã€å¿«é€Ÿéƒ¨ç½² | é‡å•Ÿå¾Œéœ€æ‰‹å‹•å•Ÿå‹• | çŸ­æœŸæ¸¬è©¦ |
| **ä¼ºæœå™¨ + screen/tmux** | ç©©å®šã€æ˜“ç›£æ§ | éœ€è¦çµ‚ç«¯æœƒè©± | ä¸­æœŸé‹è¡Œ |
| **ç³»çµ±æœå‹™** | é–‹æ©Ÿè‡ªå‹•å•Ÿå‹•ã€æœ€ç©©å®š | éœ€è¦ç³»çµ±æ¬Šé™ | **é•·æœŸæ­£å¼ç’°å¢ƒ** âœ… |
| **æœ¬åœ°é‹è¡Œ** | ç°¡å–®ã€ç„¡ä¼ºæœå™¨æˆæœ¬ | ä¾è³´å“¡å·¥é›»è…¦ | å¤šä½¿ç”¨è€…åˆ†æ•£é‹è¡Œ |

---

## ğŸ” ç›£æ§èˆ‡é™¤éŒ¯

### æŸ¥çœ‹æ‡‰ç”¨ç‹€æ…‹
```bash
# æŸ¥çœ‹é€²ç¨‹
ps aux | grep streamlit

# æŸ¥çœ‹æ—¥èªŒ
tail -f /opt/cost-analysis/logs/app.log
```

### é‡å•Ÿæ‡‰ç”¨
```bash
# åœæ­¢
pkill -f "streamlit run"

# é‡å•Ÿ
streamlit run app.py --server.address 0.0.0.0 --server.port 8501
```

---

## ğŸ’¾ å‚™ä»½é‡è¦æª”æ¡ˆ

å®šæœŸå‚™ä»½ä»¥ä¸‹å…§å®¹ï¼š
- `app.py` - æ‡‰ç”¨ç¨‹å¼ä»£ç¢¼
- `requirements.txt` - ä¾è³´æ¸…å–®
- æ‰€æœ‰ä¸Šå‚³çš„ XLSX æª”æ¡ˆï¼ˆå¦‚æœ‰ä¿å­˜ï¼‰

---

## â“ å¸¸è¦‹å•é¡Œ

**Q: èƒ½å¦æ”¹è®Šç«¯å£è™Ÿï¼Ÿ**
```bash
streamlit run app.py --server.port 9000
```

**Q: å¦‚ä½•é™åˆ¶åªæœ‰å…¬å¸å…§ç¶²è¨ªå•ï¼Ÿ**
å°‡ `--server.address 0.0.0.0` æ”¹ç‚º `--server.address 192.168.x.x`

**Q: å¿˜è¨˜é—œé–‰æ‡‰ç”¨æ€éº¼è¾¦ï¼Ÿ**
```bash
lsof -i :8501  # æ‰¾å‡ºä½”ç”¨ç«¯å£çš„é€²ç¨‹ PID
kill -9 <PID>
```

---

**éƒ¨ç½²æ—¥æœŸ**: 2025å¹´12æœˆ26æ—¥
**æ‡‰ç”¨ç‰ˆæœ¬**: 1.0
**æœ€å¾Œæ›´æ–°**: å·²åŒ…å«é›™èªæ¨™é¡Œã€PDF ä¸‹è¼‰ã€è‡ªå‹•ç¿»è­¯åŠŸèƒ½

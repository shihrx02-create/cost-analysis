# ✅ 成本分析系統 - 正式部署檢查清單

**部署日期**: 2025年12月26日  
**應用版本**: 1.0 正式版  
**最後檢查**: ✅ 所有檔案已準備

---

## 📦 已包含的文件

### 核心應用
- ✅ `app.py` - 主應用程式 (27KB)
- ✅ `requirements.txt` - 完整依賴清單 (包含 streamlit, pandas, requests, reportlab 等)

### 啟動腳本
- ✅ `setup_and_run.sh` - macOS/Linux 自動部署和啟動 (可執行)
- ✅ `setup_and_run.bat` - Windows 自動部署和啟動
- ✅ `run_server.sh` - 伺服器後台運行腳本 (tmux 模式)

### 文檔
- ✅ `快速開始.md` - 新手指南（推薦閱讀）
- ✅ `部署說明.md` - 詳細的伺服器部署指南
- ✅ `使用說明.md` - 功能說明
- ✅ `部署檢查清單.md` - 這份檔案

### 模板與示例
- ✅ `3-001044-032PN-0.html` - 標準 HTML 模板
- ✅ `3-041004-032PN-0.html` - 另一模板示例
- ✅ `3-041011-001AS-1.html` - 範本示例
- ✅ `3-044027-001SN-0.html` - 範本示例

---

## 🚀 快速部署步驟

### 第一次使用（推薦）

#### macOS/Linux:
```bash
cd /Users/grace/Desktop/成本分析
./setup_and_run.sh
```

#### Windows:
```bash
cd C:\Users\[用戶名]\Desktop\成本分析
setup_and_run.bat
```

### 伺服器部署

```bash
# 1. 複製整個資料夾到伺服器（假設 /opt/cost-analysis）
scp -r /Users/grace/Desktop/成本分析 user@server:/opt/cost-analysis

# 2. SSH 連到伺服器
ssh user@server

# 3. 執行啟動腳本
cd /opt/cost-analysis
./setup_and_run.sh

# 或使用後台運行
./run_server.sh
```

---

## ✨ 應用功能（已測試）

### 已實現的功能
- ✅ XLSX/CSV 檔案上傳
- ✅ 產品料號必填驗證
- ✅ 5 種貨幣支援（TWD, USD, EUR, AUD, GBP）
- ✅ 自動匯率設定
- ✅ 自動翻譯製程名稱（MyMemory API）
- ✅ 智能數據欄位提取（左/右欄位自動檢測）
- ✅ 雙語輸出（中文 + English）
- ✅ HTML 下載（含新版雙語標題）
- ✅ PDF 下載（reportlab）
- ✅ 成本分析表格（現況 vs 評估）
- ✅ 製程對比表格
- ✅ 專業排版（符合客戶要求）

### 新功能（最近更新）
- ✅ 主標題改為雙語：「成本分析 | Cost Analysis」
- ✅ 完整的部署文檔和自動化腳本
- ✅ 跨平台支援（macOS, Windows, Linux）

---

## 🔧 系統需求

| 項目 | 要求 | 當前狀態 |
|------|------|---------|
| **Python** | 3.8+ | ✅ 已驗證 |
| **作業系統** | macOS/Windows/Linux | ✅ 支援全平台 |
| **網路** | 需要（用於自動翻譯） | ✅ 已配置 |
| **磁碟空間** | ~500MB (含虛擬環境) | ✅ 足夠 |
| **主要依賴** | streamlit, pandas, reportlab | ✅ 已包含在 requirements.txt |

---

## 📊 依賴清單（requirements.txt 內容）

**必要套件:**
- `streamlit==1.52.2` - Web UI 框架
- `pandas==2.3.3` - 資料處理
- `requests==2.32.5` - HTTP 請求（翻譯功能）
- `reportlab==4.4.7` - PDF 生成
- `openpyxl==3.1.5` - Excel 讀取

**完整清單:** 見 `requirements.txt`

---

## 🌐 訪問方式

### 本地運行
```
http://localhost:8501
```

### 伺服器運行（其他員工訪問）
```
http://伺服器IP:8501
或
http://伺服器主機名:8501
```

### 修改端口
```bash
streamlit run app.py --server.port 9000
```

---

## 📋 檔案結構

```
成本分析/
├── app.py                              # 主應用
├── requirements.txt                    # 依賴清單
├── setup_and_run.sh                    # macOS/Linux 啟動
├── setup_and_run.bat                   # Windows 啟動
├── run_server.sh                       # 伺服器後台運行
├── .venv/                              # 虛擬環境（已建立）
├── logs/                               # 日誌目錄（自動建立）
├── 快速開始.md                         # 新手指南
├── 部署說明.md                         # 詳細文檔
├── 部署檢查清單.md                     # 這份檔案
├── 3-001044-002TS-1-廠內製程.html      # 模板
├── 3-041004-032PN-0.html               # 模板
└── (其他 HTML 模板和舊版本檔案)
```

---

## 🎯 建議的部署方案

### 小規模（≤5 人）
→ **方案 1**: 各員工自行運行
- 優點：簡單、無需伺服器
- 步驟：分發資料夾 → 員工執行 setup_and_run.sh/.bat

### 中等規模（5-20 人）
→ **方案 2**: 你的 Mac 持續運行
- 優點：集中管理、簡單
- 步驟：Mac 上執行 setup_and_run.sh → 員工訪問 http://你的IP:8501

### 大規模或正式環境
→ **方案 3**: 公司伺服器運行
- 優點：永遠線上、專業
- 步驟：按「部署說明.md」配置系統服務

---

## ⚠️ 注意事項

1. **網路連線必要**：自動翻譯功能需要網際網路
2. **防火牆設定**：如果員工無法訪問，檢查伺服器防火牆是否開放 8501 端口
3. **Python 版本**：確保員工電腦上已安裝 Python 3.8+
4. **首次啟動慢**：第一次會下載依賴，可能需要 2-5 分鐘
5. **定期備份**：定期備份上傳的 XLSX 檔案和應用代碼

---

## 🔍 故障排除

| 問題 | 解決方案 |
|------|---------|
| `ModuleNotFoundError: No module named 'streamlit'` | 執行 `pip install -r requirements.txt` |
| 端口 8501 已被佔用 | 改用其他端口 `streamlit run app.py --server.port 9000` |
| 無法翻譯製程名稱 | 檢查網路連線（需要能訪問 MyMemory API） |
| PDF 下載失敗 | 確認 reportlab 已安裝 `pip install reportlab` |
| 員工無法訪問伺服器 | 檢查防火牆、IP 地址、端口號 |

---

## 📞 支援資源

- **官方文檔**: https://streamlit.io/docs
- **快速開始**: 閱讀 `快速開始.md`
- **詳細部署**: 閱讀 `部署說明.md`
- **功能說明**: 閱讀 `使用說明.md`

---

## ✅ 最終確認

- [x] 所有代碼已編寫完成
- [x] 所有依賴已記錄 (requirements.txt)
- [x] 自動化腳本已準備 (macOS/Linux/Windows)
- [x] 文檔已編寫完整
- [x] 功能已測試（含料號 20031 示例）
- [x] 雙語支援已實現
- [x] PDF 下載已配置
- [x] 自動翻譯已啟用
- [x] 部署就緒

---

**🎉 應用已完全準備好進行正式部署！**

需要任何協助，請參考上述文檔或聯繫技術支援。
